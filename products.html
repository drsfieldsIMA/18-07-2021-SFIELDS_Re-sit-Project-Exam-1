<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
    name="description"
    content="Good Food Mood is a quick recipe search engine that lets you search recipes by ingredients for those of us that are time pressed. Find hundreds of recipes (and growing thanks to our) you can make right now with the ingredients you have available.
  Good Food can help you save time and hundreds on grocery bills by showing you how to fully use the ingredients you have at home. No more wasted left-overs. Quick Healthy, Easy, Asian, Breads, Breakfast, Caribbean, Casseroles, Desserts, Dinner, Fish recipes, Grilling & BBQ,Indian & Thai,Italian, Meat recipes,Mediterranean,Mexican,Poultry recipes, Salad Dressings,Salads,Sandwiches,Sauces,Seafood recipes,Slow Cooker,Soups,Veggie recipes"
  />
  <meta
    name="keywords"
    content="dinner ideas,tonight,leftovers,left overs,home,appliances,diet,grocery,supermarket,recipe,search engine,ingredients,pantry,food,kitchen,dinner,dessert,entree,meal"
  />
    <title>
      Search Engine Recipes 
    </title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
      crossorigin="anonymous"
    />
    <link href="css/style.css" rel="stylesheet" />
    <link rel="icon" href="data:;base64,=" />
  </head>
  <body>
    <header>
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
          <a href="index.html" class="navbar-brand"
            ><img
              class="nav_img"
              src="images/logo-3.png"
              alt="Logo of digital car catalogue "
          /></a>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav m-auto mb-2 mb-lg-0">
              <li class="nav-item alignCenter">
                <a
                  class="nav-link"
                  aria-current="page"
                  href="./index.html"
                >
                  <span class="span-nav">Home</span>
                </a>
              </li>
              <li class="nav-item alignCenter dropdown">
                <a
                  class="nav-link dropdown-toggle nav-linkdropdown-toggle"
                  id="navbarDropdown"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                  href="products.html?$ID=pizza"
                >
                  <span class="span-nav active">Recipes</span>
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <li>
                    <a class="dropdown-item" href="products.html?$ID=pizza"
                      >Pizza</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item" href="products.html?$ID=snacks"
                      >Snacks</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item" href="products.html?$ID=salad"
                      >Salads</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item" href="products.html?$ID=deserts"
                      >deserts</a
                    >
                  </li>
                </ul>
              </li>
              <li class="nav-item alignCenter">
                <a class="nav-link active" aria-current="page" href="./leftovers.html">
                  <span class="span-nav">Left overs</span>
                </a>
              </li>
              <li class="nav-item alignCenter">
                <a
                  class="nav-link"
                  aria-current="page"
                  href="./newsletter.html"
                >
                  <span class="span-nav">Newsletters</span>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>
    <div class="container-fluid">
      <div class="container">
        <h1>Recipes</h1>

        <div class="row">
          <div class="col-2">
            <label class="hero-label flex-sm-grow-1">Search</label>
          </div>
          <div class="col-10 col-md-5">
            <i class="fas fa-search"></i
            ><input
              class="search search-block"
              id="search"
              placeholder="Lasagna"
              autocomplete="on"
              type="text"
            />
          </div>
          <div class="col-12 col-md-5">
            <button class="reset" type="button">Reset</button>
          </div>
        </div>

        <main class="product-container" id="product-container">
          <div class="col-5"></div>
          <div class="col-7">
            <div class="loader"></div>
          </div>
        </main>
      </div>
    </div>
  
  <footer>
      <div><a href="/favourites.html"><i class="fas fa-shopping-cart"></i>My Items</a><a class="active" href="/products.html"><i class="fas fa-search"></i
        >Products</a></div>
      <div>Copyright 2020</div>
      <div><a href="terms.html">Terms</a> | <a href="policy.html">Privacy Policy</a></div>
  </footer>
  
  <script>
    const URL=location.href;
    console.log(URL);
    const index_id = URL.lastIndexOf('ID=');
    console.log(index_id);
    const leng= URL.length;
    console.log(leng);
    var title_kw=URL.substring(index_id+3,leng);
    console.log(title_kw);
    let xmlContent='';
    let tableMeal=document.getElementById('meal');
    let tableHours=document.getElementById('hours');
    let tableDescription=document.getElementById('description');
    let tableImage=document.getElementById('URLjpg');
    let tableUL1=document.getElementById('ul_1');
    let tableIngredients=document.getElementById('product-container');
    fetch('https://api.bigoven.com/recipes?pg=1&rpp=25&title_kw='+ title_kw+'&api_key=glFUKikehWjLW900etpS564VgIzOWSW5').then((response)=>{
        console.log(response)
        response.text().then((xml)=>{
            xmlContent=xml;
            console.log(xmlContent);

            let parser= new DOMParser();            
            console.log(parser);
            let xmlDOM=parser.parseFromString(xmlContent,'application/xml');
            console.log(xmlDOM);
            let title =xmlDOM.querySelector('ResultCount');
            let NumRecipe =xmlDOM.querySelectorAll('RecipeInfo');
            console.log(NumRecipe[0]);
            let Numingredients  =  xmlDOM.querySelectorAll('RecipeID');
            let Numimages  =  xmlDOM.querySelectorAll('ImageURL');
            console.log(Numingredients);
            let ingredientsString ='';
            NumRecipe.forEach(ingre => {
                  //  ingredientsString=+ `<li> `+ ingre.innerHTML +`</li> `
                   ingredientsString+=` <div class="col-sm-12 col-md-6 col-lg-3">
                                         <div class="card">
                                                 <div class="card-body">
                                                 <div class="embed-responsive embed-responsive-4by3" style="background-image: url(`+ ingre.querySelector('ImageURL').innerHTML+`); background-size: cover;"></div>
                                                    <h5 class="card-title">`+ ingre.querySelector('Title').innerHTML+`</h5> 
                                                    <div class="card-bottom">
                                                    <p class="card-text">`+ ingre.querySelector('RecipeID').innerHTML +`</p>
                                                    </div>
                                                     <a href="recipes.html?ID=`+ ingre.querySelector('RecipeID').innerHTML+`api_key=glFUKikehWjLW900etpS564VgIzOWSW5&data-type=xml" class="btn btn-primary">Details</a>
                                                    </div>
                                                </div>
                                            </div>`;
            });
            console.log(ingredientsString);
            tableIngredients.innerHTML=ingredientsString;
        }
    )
      }
      )
  </script>

    <!-- <script src="./searchProducts.js" type="module"></script> -->
    <!-- <script src="./products.js" type="module"></script> -->
  </body>
</html>
